(this["webpackJsonpfe-video-app"]=this["webpackJsonpfe-video-app"]||[]).push([[0],{131:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},170:function(e,t){},172:function(e,t){},184:function(e,t,n){},187:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(14),s=n.n(i),r=(n(131),n(132),n(13)),l=(n(133),n(226)),o=n(4);var j=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(""),s=Object(r.a)(i,2),j=s[0],u=s[1];Object(c.useEffect)((function(){var e=localStorage.getItem("profile");if(e){var t=JSON.parse(e),n=t.username,c=t.image;a(n),u(c)}}),[]);var b=Object(c.useState)(""),m=Object(r.a)(b,2),d=m[0],O=m[1];return Object(c.useEffect)((function(){setInterval((function(){var e=(new Date).toString().split("GMT")[0];O(e)}),1e3)}),[]),Object(o.jsxs)("div",{children:[" ",Object(o.jsxs)("ul",{className:"header",children:[Object(o.jsxs)("li",{className:"h-font",children:["Meets by ",Object(o.jsx)("strong",{children:"Mohsin"})]}),Object(o.jsx)("li",{className:"header-right",style:{marginTop:"0.5em",marginLeft:"0.4em"},children:n?Object(o.jsx)(l.a,{variant:"outlined",onClick:function(){localStorage.clear(),window.location.reload()},children:"Log Out"}):""}),Object(o.jsx)("li",{className:"header-right",style:{marginTop:"0.5em"},children:j?Object(o.jsx)("img",{src:j,id:"profile-pic"}):""}),Object(o.jsx)("li",{className:"header-right",style:{padding:"1em 0.5em 0 0em"},children:n}),Object(o.jsx)("li",{className:"header-right",style:{padding:"1em 0.5em 0 0em"},children:" \u2022 "}),Object(o.jsx)("li",{className:"header-right time",style:{padding:"1em 0.5em 0 0em"},children:d})]})]})},u=(n(139),n(140),n(109)),b=n.n(u),m=n(235);var d=function(){return Object(o.jsx)("div",{className:"footer",children:Object(o.jsx)(m.a,{href:"https://github.com/MohsinAliFarhat?tab=repositories",target:"_blank",children:Object(o.jsx)(b.a,{fontSize:"large"})})})},O=(n(143),n(86)),f=n.n(O),g=n(234),h=n(233),v=n(113),p=n.n(v),x=n(115).a.connect("https://mohsin-meets-backend.herokuapp.com/");var S=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(""),s=Object(r.a)(i,2),j=s[0],u=s[1],b=Object(c.useState)(!1),m=Object(r.a)(b,2),O=m[0],v=m[1],S=Object(c.useState)(""),N=Object(r.a)(S,2),y=N[0],C=N[1],k=Object(c.useState)(),w=Object(r.a)(k,2),I=w[0],M=w[1],E=Object(c.useState)(!1),T=Object(r.a)(E,2),A=T[0],F=T[1],L=Object(c.useState)(""),P=Object(r.a)(L,2),J=P[0],U=P[1],D=Object(c.useState)(!1),R=Object(r.a)(D,2),_=R[0],z=R[1],B=Object(c.useState)(""),G=Object(r.a)(B,2),H=G[0],q=G[1],V=Object(c.useState)(""),K=Object(r.a)(V,2),Q=K[0],W=K[1],X=Object(c.useState)(""),Y=Object(r.a)(X,2),Z=Y[0],$=Y[1],ee=Object(c.useRef)(),te=Object(c.useRef)(),ne=Object(c.useRef)();return Object(c.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){u(e),ee.current.srcObject=e})),x.on("me",(function(e){a(e)})),x.on("callUser",(function(e){v(!0),C(e.from),W(e.name),M(e.signal)}))}),[]),Object(c.useEffect)((function(){J&&x.emit("addUser",J)}),[H]),Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("profile")),t=e.name,n=e.username;U(n),q(t)}),[]),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)("div",{children:j&&Object(o.jsx)("video",{className:"video",playsInline:!0,muted:!0,ref:ee,autoPlay:!0})}),Object(o.jsx)("div",{children:A&&!_?Object(o.jsx)("video",{className:"video",playsInline:!0,ref:te,autoPlay:!0}):null}),Object(o.jsxs)("div",{className:"details",children:[Object(o.jsxs)("div",{className:"u-name",children:["Hello ",H," !"]}),Object(o.jsx)(g.a,{className:"i-details",label:"Enter username to Call",variant:"outlined",value:Z,onChange:function(e){return $(e.target.value)}}),Object(o.jsx)("div",{className:"call-button",children:A&&!_?Object(o.jsxs)(l.a,{variant:"contained",color:"secondary",onClick:function(){z(!0),ne.current.destroy()},children:["End Call with ",Q]}):Object(o.jsx)(h.a,{color:"primary","aria-label":"call",onClick:function(){return function(e){var t=new f.a({initiator:!0,trickle:!1,config:{iceServers:[{urls:"stun:numb.viagenie.ca",credential:"Mohsin123!",username:"mohsingujjar08@gmail.com"},{urls:"turn:numb.viagenie.ca",credential:"Mohsin123!",username:"mohsingujjar08@gmail.com"}]},stream:j});t.on("signal",(function(e){x.emit("callUser",{signalData:e,from:n,name:H,username:Z})})),t.on("stream",(function(e){te.current.srcObject=e})),x.on("callAccepted",(function(e){F(!0),t.signal(e)})),ne.current=t}()},children:Object(o.jsx)(p.a,{fontSize:"large"})})})]})]}),Object(o.jsx)("div",{children:O&&!A?Object(o.jsxs)("div",{className:"caller",children:[Object(o.jsxs)("h1",{children:[Q," is calling..."]}),Object(o.jsx)(l.a,{variant:"contained",color:"primary",onClick:function(){F(!0);var e=new f.a({initiator:!1,config:{iceServers:[{urls:"stun:numb.viagenie.ca",credential:"Mohsin123!",username:"mohsingujjar08@gmail.com"},{urls:"turn:numb.viagenie.ca",credential:"Mohsin123!",username:"mohsingujjar08@gmail.com"}]},trickle:!1,stream:j});e.on("signal",(function(e){x.emit("answerCall",{signal:e,to:y})})),e.on("stream",(function(e){te.current.srcObject=e})),e.signal(I),ne.current=e},children:"Answer"})]}):null}),Object(o.jsx)(d,{})]})},N=n(114),y=n.n(N),C=(n(184),function(e){var t=e.profileObj;console.log(t),t?(localStorage.setItem("profile",JSON.stringify({username:t.email.split("@")[0],image:t.imageUrl,name:t.name})),window.location.reload()):console.log("NOTHING returned")});var k=function(){return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{className:"g-font",children:"Please Login To Continue to free Video Call App"}),Object(o.jsx)(y.a,{clientId:"466743185625-62lthnm4la02e5rdbgintqlc3h0nac1g.apps.googleusercontent.com",buttonText:"Login",onSuccess:C,onFailure:C,cookiePolicy:"single_host_origin"})]})},w=localStorage.getItem("profile");var I=function(){return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(j,{}),w?Object(o.jsx)(S,{}):Object(o.jsx)(k,{})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,238)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),i(e),s(e)}))};n(185);s.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(I,{})}),document.getElementById("root")),M()}},[[187,1,2]]]);
//# sourceMappingURL=main.6de2bddb.chunk.js.map